window.HYPUR={LOADING:!1};function T(){window.HYPUR.LOADING=!0}function S(){window.HYPUR.LOADING=!1}var i={start:T,end:S};var a=new WeakMap;function m(t,e){return o(t,e,"p")}function E(t,e){return o(t,e,"button")}function v(t,e){return o(t,e,"section")}function y(t,e){return o(t,e,"h1")}function f(t,e){return o(t,e,"h2")}function h(t,e){return o(t,e,"h2")}function g(t,e){return o(t,e,"div")}function x(t,e){return o(t,e,"input")}function R(t,e){return o(t,e,"select")}function o(t,e,n){let r=document.querySelector(`${n}[hypur="${t}"]`);if(!r)throw new Error(`${n} HTMLElement element ${t} does not exist`);return new s(t,r,e)}function w(t,e){let n=document.querySelector(`[hypur="${t}"]`);if(!n)throw new Error(`HTMLElement ${t} does not exist`);return new s(t,n,e)}class s{name;element;listeners;defaultState;constructor(t,e,n){this.name=t,this.element=e,this.listeners=[],this.defaultState=n,a.set(e,n||{})}get state(){return a.get(this.element)}setState(t){this.state={...this.state,...t(this.state)}}resetState(){this.state=this.defaultState||{}}set state(t){a.set(this.element,t)}onEvent(t,e){return this.listeners.push({eventType:t,action:e}),this.element.addEventListener(t,(n)=>{let r=a.get(this.element);e(this,n,r)}),this}onClick(t){return this.onEvent("click",t)}onChange(t){return this.onEvent("change",t)}onInput(t){return this.onEvent("input",t)}onMouseOver(t){return this.onEvent("mouseover",t)}onMouseOut(t){return this.onEvent("mouseout",t)}onKeyDown(t){return this.onEvent("keydown",t)}onKeyUp(t){return this.onEvent("keyup",t)}async fetcher(t,e){i.start();let n=await fetch(t,{method:e,body:a.get(this.element)});return i.end(),n}async delete(t,e){let n=await this.fetcher(t,"DELETE");if(e)await Promise.resolve(e(n))}async put(t,e){let n=await this.fetcher(t,"PUT");if(e)await Promise.resolve(e(n))}async post(t,e){let n=await this.fetcher(t,"POST");if(e)await Promise.resolve(e(n))}async get(t,e){let n=await this.fetcher(t,"GET");if(e)await Promise.resolve(e(n))}}function L(t){document.addEventListener("DOMContentLoaded",t)}function M(t,e,n){let r=e.element.cloneNode(!0),d=new s(e.name,r,e.defaultState);n(d),e.listeners.forEach((c)=>{r.addEventListener(c.eventType,(u)=>c.action(d,u,e.defaultState||{}))}),a.set(r,e.defaultState||{}),t.element.appendChild(r)}var O=window.HYPUR.LOADING;export{a as stateStore,R as select,v as section,m as p,L as onLoad,O as loading,x as input,h as h3,f as h2,y as h1,w as element,g as div,E as button,M as append,s as HypurElement};
