var a=new WeakMap;function u(t,e){return s(t,e,"p")}function E(t,e){return s(t,e,"button")}function h(t,e){return s(t,e,"section")}function p(t,e){return s(t,e,"h1")}function T(t,e){return s(t,e,"h2")}function m(t,e){return s(t,e,"h2")}function S(t,e){return s(t,e,"div")}function s(t,e,n){let r=document.querySelector(`${n}[hypur="${t}"]`);if(!r)throw new Error(`${n} HTMLElement element ${t} does not exist`);return new o(t,r,e)}function c(t,e){let n=document.querySelector(`[hypur="${t}"]`);if(!n)throw new Error(`HTMLElement ${t} does not exist`);return new o(t,n,e)}class o{name;baseElement;bindState=!1;key;constructor(t,e,n){this.name=t,this.baseElement=e;let r=this.baseElement.dataset.key;if(r)this.key=Number(r);a.set(this.baseElement,n)}get element(){return this.baseElement}get state(){return a.get(this.baseElement)}setState(t){this.state={...this.state,...t(this.state)}}set state(t){if(a.set(this.baseElement,t),this.bindState)Object.keys(t).forEach((e)=>{let n=this.baseElement.querySelector(`[hypur="${e}"]`);if(n!==null)n.innerText=t[e]&&t[e]})}setChildren(t){this.baseElement.innerHTML=t.baseElement.innerHTML}onEvent(t,e){this.baseElement.addEventListener(t,(n)=>{e(this,n)})}bind(){return this.bindState=!0,this}onClick(t){this.onEvent("click",t)}onChange(t){this.onEvent("change",t)}onInput(t){this.onEvent("input",t)}onMouseOver(t){this.onEvent("mouseover",t)}onMouseOut(t){this.onEvent("mouseout",t)}onKeyDown(t){this.onEvent("keydown",t)}onKeyUp(t){this.onEvent("keyup",t)}spread(...t){this.baseElement.childNodes.forEach((e,n)=>{e.textContent=t[n]})}get parent(){let t=this.baseElement.parentElement;if(!t)throw new Error(`HypurElement ${this.name} does not have parent`);return t}duplicate(){let t=this.baseElement.cloneNode(!0);if(!this.baseElement.parentNode)throw new Error(`HypurElement with id ${this.baseElement.id} does not have parent to run duplicate`);this.baseElement.parentNode?.appendChild(t)}remove(){this.baseElement.remove()}async fetcher(t,e){return await fetch(t,{method:e,body:this.baseElement.dataset.state})}async delete(t,e){let n=await this.fetcher(t,"DELETE");if(e)await Promise.resolve(e(n))}async put(t,e){let n=await this.fetcher(t,"PUT");if(e)await Promise.resolve(e(n))}async post(t,e){let n=await this.fetcher(t,"POST");if(e)await Promise.resolve(e(n))}async get(t,e){let n=await this.fetcher(t,"GET");if(e)await Promise.resolve(e(n))}}function v(t,e){let n=document.querySelectorAll(`[hypur="${t}"]`);if(!n.length)throw new Error(`Elements ${t} do not exist`);let r=Array.from(n).map((d)=>new o(t,d,e));return new i(r)}class i extends Array{constructor(t){super();this.push(...t)}onEvent(t,e){this.forEach((n)=>{n.baseElement.addEventListener(t,(r)=>{e(n,r)})})}bind(){return this.forEach((t)=>{t.bind()}),this}onClick(t){this.onEvent("click",t)}onChange(t){this.onEvent("change",t)}onInput(t){this.onEvent("input",t)}onMouseOver(t){this.onEvent("mouseover",t)}onMouseOut(t){this.onEvent("mouseout",t)}onKeyDown(t){this.onEvent("keydown",t)}onKeyUp(t){this.onEvent("keyup",t)}append(...t){let e=this[this.length-1],n=new o(e.name,e.baseElement,e.state);n.spread(...t),this.append(n)}}function b(t){document.addEventListener("DOMContentLoaded",t)}export{h as section,u as p,b as onLoad,m as h3,T as h2,p as h1,v as elements,c as element,S as div,E as button,i as HypurElements,o as HypurElement};
