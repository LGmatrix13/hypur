class s extends HTMLElement{onClick(e){}onChange(e){}onInput(e){}onMouseOver(e){}onMouseOut(e){}onKeyDown(e){}onKeyUp(e){}constructor(){super()}async resolver(e,t){try{await e.call(this,t)}catch(o){console.error("Error in handler:",o)}}connectedCallback(){if(s.prototype.onClick!==this.onClick)this.addEventListener("click",async(e)=>{await this.resolver(this.onClick,e)});if(s.prototype.onChange!==this.onChange)this.addEventListener("change",async(e)=>{await this.resolver(this.onChange,e)});if(s.prototype.onInput!==this.onInput)this.addEventListener("input",async(e)=>{await this.resolver(this.onInput,e)});if(s.prototype.onMouseOver!==this.onMouseOver)this.addEventListener("mouseover",async(e)=>{await this.resolver(this.onMouseOver,e)});if(s.prototype.onMouseOut!==this.onMouseOut)this.addEventListener("mouseout",async(e)=>{await this.resolver(this.onMouseOut,e)});if(s.prototype.onKeyDown!==this.onKeyDown)this.addEventListener("keydown",async(e)=>{await this.resolver(this.onKeyDown,e)});if(s.prototype.onKeyUp!==this.onKeyUp)this.addEventListener("keyup",async(e)=>{await this.resolver(this.onKeyUp,e)})}disconnectedCallback(){if(s.prototype.onClick!==this.onClick)this.removeEventListener("click",this.onClick.bind(this));if(s.prototype.onChange!==this.onChange)this.removeEventListener("change",this.onChange.bind(this));if(s.prototype.onInput!==this.onInput)this.removeEventListener("input",this.onInput.bind(this));if(s.prototype.onMouseOver!==this.onMouseOver)this.removeEventListener("mouseover",this.onMouseOver.bind(this));if(s.prototype.onMouseOut!==this.onMouseOut)this.removeEventListener("mouseout",this.onMouseOut.bind(this));if(s.prototype.onKeyDown!==this.onKeyDown)this.removeEventListener("keydown",this.onKeyDown.bind(this));if(s.prototype.onKeyUp!==this.onKeyUp)this.removeEventListener("keyup",this.onKeyUp.bind(this))}static mount(e,t){customElements.define(e,t)}}window.HYPUR={LOADING:!1};function h(){window.HYPUR.LOADING=!0}function v(){window.HYPUR.LOADING=!1}var a={start:h,end:v};var l={};class i{static within(e,t){let o=e.querySelector(`[sow="${t}"]`);if(!o)throw new Error(`No Grain of name ${t} found within requested element`);return o}static last(e){let t=Array.from(document.querySelectorAll(`[sow="${e}"]`));if(!t.length)throw new Error(`No Grain of name ${e} could be found`);return t[t.length-1]}static first(e){return i.find(e)}static all(e){let t=Array.from(document.querySelectorAll(`[sow="${e}"]`));if(!t.length)throw new Error(`Sow could not find ${e}`);return t}static append(e,t){e.append(t)}static prepend(e,t){e.prepend(t)}static clone(e){return e.cloneNode(!0)}static find(e){let t=document.querySelector(`[sow="${e}"]`);if(!t)throw new Error(`Sow could not find ${e}`);return t}static snapshot(e){let t=i.find(e).cloneNode(!0);l[e]=t}static template(e){let t=document.querySelector(`template[sow="${e}"]`);if(!t)throw new Error(`Sow could not find template ${t}`);return t}static restore(e){let t=l[e];if(!t)throw new Error(`Sow could not find snapshot ${e}`);return delete l[e],t}static spread(e,t){Object.keys(t).forEach((o)=>{let n=e.querySelector(`[sow="${o}"]`);if(!n){let r=e.querySelector(o);if(!r)throw new Error(`Sow of name ${o} could not be found`);r.innerText=t[o]}else n.innerText=t[o]})}static remove(e){e.remove()}static async fetcher(e,t,o){a.start();let n=new URL(e,window.origin),r=await fetch(n,{method:t,body:JSON.stringify(o)});return a.end(),r}static async delete(e,t,o){let n=await i.fetcher(e,"DELETE",t);if(o)await Promise.resolve(o(n))}static async put(e,t,o){let n=await i.fetcher(e,"PUT",t);if(o)await Promise.resolve(o(n))}static async post(e,t,o){let n=await i.fetcher(e,"POST",t);if(o)await Promise.resolve(o(n))}static async get(e,t,o){let n=await i.fetcher(e,"GET",t);if(o)await Promise.resolve(o(n))}static async hypermedia(e,t,o,n){let d=await(await i.fetcher(e,t,o)).text();if(n)await Promise.resolve(n(d))}}class u extends s{state={};constructor(){super()}async delete(e,t){await i.delete(e,this.state,t)}async put(e,t){await i.put(e,this.state,t)}async post(e,t){await i.post(e,this.state,t)}async get(e,t){await i.get(e,this.state,t)}async hypermedia(e,t,o){await i.hypermedia(e,t,this.state,o)}}class f extends HTMLElement{constructor(){super();let e=this.querySelector("form");if(e)e.addEventListener("submit",async(t)=>{t.preventDefault();let o=e.getAttribute("method"),n=e.getAttribute("action"),r=new FormData(e),d={};if(r.forEach((c,m)=>{d[m]=c}),o&&n){let c=new URL(n,window.location.origin),m=await Promise.resolve(this.beforeSubmit(d));await Promise.resolve(this.onSubmit(m));let p=await this.fetcher(c,o,r);await Promise.resolve(this.afterSubmit(p))}else{let c=await Promise.resolve(this.beforeSubmit(d));await Promise.resolve(this.onSubmit(c))}})}async fetcher(e,t,o){a.start();let n=await fetch(e,{method:t,body:o});return a.end(),n}beforeSubmit(e){return e}onSubmit(e){}afterSubmit(e){}static mount(e,t){customElements.define(e,t)}}var x=window.HYPUR.LOADING;export{x as loading,u as StatefulGrain,i as Sow,s as Grain,f as FormGrain};
